# Анализатор логов nginx
Скрипт обрабатывает последний (дата определяется в имени файла) nginx лог вида "nginx-access-ui.log-YYYYMMDD" в формате plain и gzip и формирует HTML-отчет со следующими столбцами:

**count** - количество вхождений URL (из параметра $request), абсолютное значение

**count_perc** - количество вхождений URL в процентнах относительно общего числа запросов

**time_sum** - суммарное время $request_time для данного URL, абсолютное значение

**time_perc** - суммарное время $request_time для данного URL, в процентах относительно общего $request_time всех запросов

**time_avg** - среднее время $request_time для данного URL

**time_max** - маĸсимальное время $request_time для данного URL

**time_med** - медиана $request_time для данного URL

## Конфигурация
*REPORT_SIZE* - количество строк в отчёте (по умолчанию 1000). Строки отортированы по убыванию суммарного request_time

*REPORT_DIR* - каталог, в котором хранятся отчёты (по умолчанию "./reports")

*LOG_DIR* - каталог, в котором хранятся обрабатываемые лог-файлы (по умолчанию "./log")

*TEMPLATE* - шаблон для генерации отчёта (по умолчанию "report.html"). Строки отчёта хранятся в переменной $table_json

*MAX_ERROR_RATE* - максимально допустимая доля ошибок в обрабатываемом лог-файле: 0.8

*LOG_FILE* - лог-файл скрипта (по умолчанию "log_analyzer.log")

## Запуск
*log_analyzer.py [--config config_file.json]*

*--config config_file.json* - опциональный параметр для загрузки конфигурации из файла *config.json*. Файл конфигурации должен храниться в папке "config"

## Тестирование
*test_log_analyzer.py*

## Требования
Python >= 3.6
